# Angular17 & 18 Notes

> Study notes for Angular 17 & 18, generated by Xiaoran

## Table of Contents
Filter
- [Button Toggle](#anchor_fi_1)<br/>

Form
- [Input Validation](#anchor_fo_1)<br/>
- [Date Filter](#anchor_fo_2)<br/>
- [Button Disable](#anchor_fo_3)<br/>

## Button Toggel<a name="anchor_fi_1"></a>
> There are two buttons that can filter the table, and the selected button should remain active.
HTML
```html
<button  mat-raised-button (click)="setFlagOn()" [ngClass]="{'flag-button': isFlagOn}">
    <span class="d-none d-xs-none d-sm-none d-md-none d-lg-inline d-xl-inline"> condition_1 </span>
</button>
<button  mat-raised-button (click)="setFlagOff()" [ngClass]="{'flag-button': !isFlagOn}">
    <span class="d-none d-xs-none d-sm-none d-md-none d-lg-inline d-xl-inline"> condition_2 </span>
</button>
```
Typescript
```typescript
isExpFlagOn = false;
...
setFlagOn(){
    ...
    this.getPrices();
    this.isFlagOn = true;
}
setFlagOff(){
    ...
    this.getPrices();
    this.isFlagOn = false;
}
getPrices() {
    this.loadingBP= true; // Set loading flag to true
    this.subscription.add(this.priceService.getPaginatedPrices(this.pageIndex, this.pageSize, this.sortingParam, ...parameters..., this.flag)
        .subscribe((res) => {
            // Assign fetched prices to Prices variable
            this.bpData.data = res.content.filter(price => price.flag === this.flag);// Filter by Export or Domestic
            this.totalRecords = res.totalRecordCount;
            this.bpData.sort = this.sort;
            this.needUpdate = false; // Reset update flag
            this.loadingBP = false; // Set loading flag to false
        },
        (error) => {
            console.error("Error fetching prices:", error);
            this.loadingBP = false; // Set loading flag to false in case of error
        }));
 }
```

## Form Input Validation with ngModel<a name="anchor_fo_1"></a>
HTML
```html
<mat-form-field appearance="outline">
    <mat-label>Customer Number</mat-label>
    <input 
    matInput 
    [(ngModel)]="customerDetailModel.legacyCustNo" 
    id="legacyCustNo" 
    (ngModelChange)="onFormChange()" 
    #custNo="ngModel" 
    required maxlength="6" 
    pattern="^[0-9]*$" 
    (focus)="custNo.control.markAsTouched()" >
    <mat-error 
    *ngIf="custNo.hasError('required') && custNo.touched ">
        Customer number is required
    </mat-error>
    <mat-error 
    *ngIf="custNo.hasError('maxlength') && custNo.touched || custNo.hasError('pattern')">
        Max 6 digits and numeric
    </mat-error>
</mat-form-field>
```
Typescript
```typescript
// This method is for form submission
// not for showing input errors immediately when the user is typing
validateRequest(): {validate: boolean, error : string} {
    ...
    if(!this.customerDetailModel.legacyCustNo) {
      return {validate: false, error : "Enter Customer Number"};
    }
    else if (isNaN(Number(this.customerDetailModel.legacyCustNo))) {
      return {validate: false, error : "Customer Number must contain only numbers"};
    }
    else if( this.customerDetailModel.legacyCustNo.length > 6){
      return {validate: false, error : "Enter Customer Number with no more than 6 digits"};
    }
    ...
}
```

## Form Date Filter<a name="anchor_fo_2"></a>
HTML
```html
<mat-form-field  appearance="outline">
    <mat-label>Date</mat-label>
    <input 
    matInput 
    type="text" 
    id="date" 
    [(ngModel)]="scrapDetailModel.date" 
    [matDatepicker]="picker" 
    placeholder="Choose a date" 
    [matDatepickerFilter]="dateFilter" >
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
 </mat-form-field>    
```
Typescript
```typescript
// Set the date limit to 10 years in the past from the current year.
dateFilter(d: Date): boolean {
    const currDate = new Date();
    const pastDate =  new Date();
    const gap = 10;
    pastDate.setFullYear(currDate.getFullYear() - gap);
    return d >= pastDate && d <= currDate; 
}
```

## Button Disable<a name="anchor_fo_3"></a>
HTML
```html
<button mat-stroked-button color="primary" (click)="addOrUpdate()" [disabled]="isDisable" >
    <mat-icon>save</mat-icon>
    <span class="d-none d-xs-none d-sm-none d-md-none d-lg-inline d-xl-inline">
        Save 
    </span>
</button>
```
Typescript
```typescript
onFormChange() {
    this.formChanged = true;
    // The save button is disabled until the inputs in the form are valid.
    const {validate, error} = this.validateRequest();
    if (validate == false) {
      this.isDisable = true;
    } else {
      this.isDisable = false;
    }
  }
```

**crud-app** resouce: 

**crud-tutorial-app** resouce: https://www.bezkoder.com/angular-17-crud-example/
