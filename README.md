# Angular18-CRUD

> Study notes for Angular 17 & 18, generated by Xiaoran

## Table of Contents
Form
- [Input Validation](#anchor_f_1)<br/>
- [Date Filter](#anchor_f_2)<br/>
- [Button Disable](#anchor_f_3)<br/>

## Form Input Validation<a name="anchor_f_1"></a>
HTML
```html
<mat-form-field appearance="outline">
    <mat-label>Customer Number</mat-label>
    <input 
    matInput 
    [(ngModel)]="customerDetailModel.legacyCustNo" 
    id="legacyCustNo" 
    (ngModelChange)="onFormChange()" 
    #custNo="ngModel" 
    required maxlength="6" 
    pattern="^[0-9]*$" 
    (focus)="custNo.control.markAsTouched()" >
    <mat-error 
    *ngIf="custNo.hasError('required') && custNo.touched ">
        Customer number is required
    </mat-error>
    <mat-error 
    *ngIf="custNo.hasError('maxlength') && custNo.touched || custNo.hasError('pattern')">
        Max 6 digits and numeric
    </mat-error>
</mat-form-field>
```
Typescript
```typescript
// This method is for form submission
// not for showing input errors immediately when the user is typing
validateRequest(): {validate: boolean, error : string} {
    ...
    if(!this.customerDetailModel.legacyCustNo) {
      return {validate: false, error : "Enter Customer Number"};
    }
    else if (isNaN(Number(this.customerDetailModel.legacyCustNo))) {
      return {validate: false, error : "Customer Number must contain only numbers"};
    }
    else if( this.customerDetailModel.legacyCustNo.length > 6){
      return {validate: false, error : "Enter Customer Number with no more than 6 digits"};
    }
    ...
}
```

## Form Date Filter<a name="anchor_f_2"></a>
HTML
```html
<mat-form-field  appearance="outline">
    <mat-label>Date</mat-label>
    <input 
    matInput 
    type="text" 
    id="date" 
    [(ngModel)]="scrapDetailModel.date" 
    [matDatepicker]="picker" 
    placeholder="Choose a date" 
    [matDatepickerFilter]="dateFilter" >
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
 </mat-form-field>    
```
Typescript
```typescript
// Set the date limit to 10 years in the past from the current year.
dateFilter(d: Date): boolean {
    const currDate = new Date();
    const pastDate =  new Date();
    const gap = 10;
    pastDate.setFullYear(currDate.getFullYear() - gap);
    return d >= pastDate && d <= currDate; 
}
```

## Button Disable<a name="anchor_f_3"></a>
HTML
```html
<button mat-stroked-button color="primary" (click)="addOrUpdate()" [disabled]="isDisable" >
    <mat-icon>save</mat-icon>
    <span class="d-none d-xs-none d-sm-none d-md-none d-lg-inline d-xl-inline">
        Save 
    </span>
</button>
```
Typescript
```typescript
onFormChange() {
    this.formChanged = true;
    // The save button is disabled until the inputs in the form are valid.
    const {validate, error} = this.validateRequest();
    if (validate == false) {
      this.isDisable = true;
    } else {
      this.isDisable = false;
    }
  }
```

**crud-app** resouce: 

**crud-tutorial-app** resouce: https://www.bezkoder.com/angular-17-crud-example/